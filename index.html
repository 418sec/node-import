<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>Node-import by mahdaen</title>
  </head>

  <body>
    <div id="container">
      <div class="inner">

        <header>
          <h1>Node-import</h1>
          <h2>Imports dependencies and run it directly or concatenate them and exports to file.</h2>
        </header>

        <section id="downloads" class="clearfix">
          <a href="https://github.com/mahdaen/node-import/zipball/master" id="download-zip" class="button"><span>Download .zip</span></a>
          <a href="https://github.com/mahdaen/node-import/tarball/master" id="download-tar-gz" class="button"><span>Download .tar.gz</span></a>
          <a href="https://github.com/mahdaen/node-import" id="view-on-github" class="button"><span>View on GitHub</span></a>
        </section>

        <hr>

        <section id="main_content">
          <h1>
<a id="nodejs-import" class="anchor" href="#nodejs-import" aria-hidden="true"><span class="octicon octicon-link"></span></a>NodeJS Import</h1>

<p>Imports dependencies and run it directly (sync/async) or concatenate them and exports to file.</p>

<h3>
<a id="why" class="anchor" href="#why" aria-hidden="true"><span class="octicon octicon-link"></span></a><strong>Why?</strong>
</h3>

<hr>

<p>Before I write this, I just think if I can concatenate my scripts with direct import in each file.
But when I thinking how to do that, I think I need to create script that can concatenate and run it,
as well supporting synchronus mode without headache.</p>

<p>By default, imported scripts executed in synchronus mode, since for async purpose nodejs already have it,
even we have <code>async</code> module.</p>

<p>We know that asynchronus evented I/O model is the benefits of nodejs. But sometimes, probably we need to runs
synchronus scripts, especially when we create some modules and we need to separate the files but we need
to ensure each files can communicate with each others, including the global variables in each files.</p>

<h3>
<a id="installation" class="anchor" href="#installation" aria-hidden="true"><span class="octicon octicon-link"></span></a><strong>Installation</strong>
</h3>

<hr>

<pre><code>npm install --save node-import
</code></pre>

<p>To use the CLI support, install it globally.</p>

<pre><code>npm install -g node-import
</code></pre>

<h3>
<a id="importexport" class="anchor" href="#importexport" aria-hidden="true"><span class="octicon octicon-link"></span></a><strong>Import/Export</strong>
</h3>

<p>Import another scripts and run/export to file.</p>

<h4>
<a id="syntax" class="anchor" href="#syntax" aria-hidden="true"><span class="octicon octicon-link"></span></a><strong>Syntax</strong>
</h4>

<hr>

<p>Use the <code>'@import [file ..]';</code> to import the dependencies. It's should be string, like when you use <code>use strict</code>.</p>

<h4>
<a id="example" class="anchor" href="#example" aria-hidden="true"><span class="octicon octicon-link"></span></a><strong>Example</strong>
</h4>

<hr>

<h5>
<a id="testjs" class="anchor" href="#testjs" aria-hidden="true"><span class="octicon octicon-link"></span></a><code>test.js</code>
</h5>

<div class="highlight highlight-js"><pre><span class="pl-c">// Importing dependencies at begining.</span>
<span class="pl-s1"><span class="pl-pds">'</span>@import libs/lib-a.js<span class="pl-pds">'</span></span>;
<span class="pl-s1"><span class="pl-pds">'</span>@import libs/lib-b.js<span class="pl-pds">'</span></span>;

<span class="pl-s">var</span> a <span class="pl-k">=</span> <span class="pl-s1"><span class="pl-pds">'</span>Test..<span class="pl-pds">'</span></span>;

<span class="pl-c">// Create variable from file lib-a.js.</span>
<span class="pl-s">var</span> b <span class="pl-k">=</span> libaA;

<span class="pl-en">console</span><span class="pl-s3">.log</span>(a, b);</pre></div>

<h5>
<a id="libslib-ajs" class="anchor" href="#libslib-ajs" aria-hidden="true"><span class="octicon octicon-link"></span></a>
<code>libs/lib-a.js</code>;</h5>

<div class="highlight highlight-js"><pre><span class="pl-c">// Create library to be used by test.js</span>
<span class="pl-s">var</span> libA <span class="pl-k">=</span> <span class="pl-s1"><span class="pl-pds">'</span>Foo is bar foobar<span class="pl-pds">'</span></span>;

<span class="pl-c">// Import is not always in begining, and relative to cwd of lib-a.js.</span>
<span class="pl-s1"><span class="pl-pds">'</span>@import lib-c.js<span class="pl-pds">'</span></span>;

<span class="pl-c">// Imports multiple files.</span>
<span class="pl-s1"><span class="pl-pds">'</span>@import libs/lib-a.js, libs/lib-c.js<span class="pl-pds">'</span></span>;
<span class="pl-s1"><span class="pl-pds">'</span>@import libs/*.js<span class="pl-pds">'</span></span>;</pre></div>

<h3>
<a id="namespace" class="anchor" href="#namespace" aria-hidden="true"><span class="octicon octicon-link"></span></a><strong>Namespace</strong>
</h3>

<p>Namespace provide ability to keep the global variables of file is not overwritten by other references.</p>

<h4>
<a id="syntax-1" class="anchor" href="#syntax-1" aria-hidden="true"><span class="octicon octicon-link"></span></a><strong>Syntax</strong>
</h4>

<hr>

<p>You can define namespace by using <code>'@namespace $NAME$</code>;`. Like import, it's should be string as well.</p>

<h4>
<a id="example-1" class="anchor" href="#example-1" aria-hidden="true"><span class="octicon octicon-link"></span></a><strong>Example</strong>
</h4>

<hr>

<h5>
<a id="foojs" class="anchor" href="#foojs" aria-hidden="true"><span class="octicon octicon-link"></span></a><code>foo.js</code>
</h5>

<div class="highlight highlight-js"><pre><span class="pl-c">// Importing libs.</span>
<span class="pl-s1"><span class="pl-pds">'</span>@import bar.js<span class="pl-pds">'</span></span>;

<span class="pl-c">// Private vars.</span>
<span class="pl-s">var</span> myfoo <span class="pl-k">=</span> <span class="pl-s1"><span class="pl-pds">'</span>Foo of foo.js<span class="pl-pds">'</span></span>;
<span class="pl-s">var</span> exfoo <span class="pl-k">=</span> bar.foo <span class="pl-k">+</span> myfoo;

<span class="pl-c">// Global vars.</span>
<span class="pl-s">var</span> spfoo <span class="pl-k">=</span> foobar <span class="pl-k">+</span> <span class="pl-s1"><span class="pl-pds">'</span> is global<span class="pl-pds">'</span></span>;</pre></div>

<h5>
<a id="barjs" class="anchor" href="#barjs" aria-hidden="true"><span class="octicon octicon-link"></span></a><code>bar.js</code>
</h5>

<div class="highlight highlight-js"><pre><span class="pl-c">// Create namespace</span>
<span class="pl-s1"><span class="pl-pds">'</span>@namespace bar<span class="pl-pds">'</span></span>;

<span class="pl-s">var</span> foo <span class="pl-k">=</span> <span class="pl-s1"><span class="pl-pds">'</span>Foo of Bar<span class="pl-pds">'</span></span>;
<span class="pl-s">var</span> foobar <span class="pl-k">=</span> <span class="pl-s1"><span class="pl-pds">'</span>Global foobar<span class="pl-pds">'</span></span>;</pre></div>

<h3>
<a id="usage" class="anchor" href="#usage" aria-hidden="true"><span class="octicon octicon-link"></span></a><strong>Usage</strong>
</h3>

<h4>
<a id="nodejs" class="anchor" href="#nodejs" aria-hidden="true"><span class="octicon octicon-link"></span></a><code>NodeJS</code>
</h4>

<hr>

<p><code>imports(files, [options (object)]);</code></p>

<h5>
<a id="options" class="anchor" href="#options" aria-hidden="true"><span class="octicon octicon-link"></span></a><code>options</code>
</h5>

<ul>
<li>
<code>exec</code> Execute the imported scripts. Default <code>true</code>
</li>
<li>
<code>async</code> Execute the imported scripts in async mode. Default <code>false</code>
</li>
<li>
<code>export</code> Export imported scripts to file. Default <code>false</code>
</li>
<li>
<code>exportDir</code> Export location.</li>
<li>
<code>exportMin</code> Include minified version when exporting. Default <code>true</code>
</li>
<li>
<code>exportMap</code> Include sourcemap when uglifying. Default <code>true</code> <em>(not yet tested)</em>
</li>
</ul>

<div class="highlight highlight-js"><pre><span class="pl-s">var</span> imports <span class="pl-k">=</span> <span class="pl-s3">require</span>(<span class="pl-s1"><span class="pl-pds">'</span>node-import<span class="pl-pds">'</span></span>);

<span class="pl-c">// Just execute.</span>
imports(<span class="pl-s1"><span class="pl-pds">'</span>./test.js<span class="pl-pds">'</span></span>);

<span class="pl-c">// Execute and get the scripts.</span>
<span class="pl-s">var</span> result <span class="pl-k">=</span> imports(<span class="pl-s1"><span class="pl-pds">'</span>./test.js<span class="pl-pds">'</span></span>);

<span class="pl-c">// Only export the scripts.</span>
imports(<span class="pl-s1"><span class="pl-pds">'</span>./test.js<span class="pl-pds">'</span></span>, { exec<span class="pl-k">:</span> <span class="pl-c1">false</span>, export<span class="pl-k">:</span> <span class="pl-c1">true</span>, exportDir<span class="pl-k">:</span> <span class="pl-s1"><span class="pl-pds">'</span>./test/out<span class="pl-pds">'</span></span> });</pre></div>

<h4>
<a id="cli" class="anchor" href="#cli" aria-hidden="true"><span class="octicon octicon-link"></span></a><code>CLI</code>
</h4>

<hr>

<p><code>node-import [options] [file ..]</code></p>

<h5>
<a id="options-1" class="anchor" href="#options-1" aria-hidden="true"><span class="octicon octicon-link"></span></a><code>options</code>
</h5>

<ul>
<li>
<code>-r</code> Run imported scripts. Default <code>true</code>
</li>
<li>
<code>-a</code> Run in async mode. Default <code>false</code>
</li>
<li>
<code>-e</code> Export imported scripts. Default <code>false</code>
</li>
<li>
<code>-u</code> Include uglify when exporting scripts. Default <code>true</code>
</li>
<li>
<code>-s</code> Include sourcemap when uglifying. Default <code>true</code>
</li>
<li>
<code>-o</code> Output directory to export.</li>
<li>
<code>-v</code> Logs all processes.</li>
<li>
<code>-h</code> Show helps.</li>
</ul>

<pre><code>node-import -e -o test/out test/index.js
</code></pre>

<h2>
<a id="release-history" class="anchor" href="#release-history" aria-hidden="true"><span class="octicon octicon-link"></span></a>Release History</h2>

<ul>
<li>2015-02-21        v0.1.3      "Fixing mistakes with <code>async</code> option."</li>
<li>2015-02-21        v0.1.2      "Adding namespace support."</li>
<li>2015-02-21        v0.1.1      "First release."</li>
</ul>
        </section>

        <footer>
          Node-import is maintained by <a href="https://github.com/mahdaen">mahdaen</a><br>
          This page was generated by <a href="http://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.
        </footer>

                  <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-59980155-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

      </div>
    </div>
  </body>
</html>